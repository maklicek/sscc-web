name: Guard bad paths
on: [push, pull_request]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Scan HTML and CSS for bad paths
        shell: bash
        run: |
          set -euo pipefail
          echo "üîç Kontroluji cesty v HTML a CSS..."

          # 1) V HTML zak√°zat ABSOLUTN√ç cesty od ko≈ôene ("/...").
          BAD1=$(grep -RIn 'href="/' --include='*.html' -- . || true)
          BAD2=$(grep -RIn 'src="/'  --include='*.html' -- . || true)

          # 2) V CSS zak√°zat pou≈æ√≠v√°n√≠ 'images/' (m√° b√Ωt assets/img/‚Ä¶).
          BAD3=$(grep -RIn 'images/' --include='*.css' -- . || true)

          if [[ -n "$BAD1$BAD2$BAD3" ]]; then
            echo "‚ùå Nalezeny potenci√°lnƒõ chybn√© cesty:"
            [[ -n "$BAD1" ]] && echo "$BAD1"
            [[ -n "$BAD2" ]] && echo "$BAD2"
            [[ -n "$BAD3" ]] && echo "$BAD3"
            exit 1
          fi

          echo "‚úÖ Cesty vypadaj√≠ v po≈ô√°dku."
